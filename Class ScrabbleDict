
import random, string
from clean import new_file
# making a class of ScrabbleDict
class ScrablleDict:
    # intializing the content 
    def __init__(self,size,filename):
        self.size=size
        self.filename=filename
        self.dict={}
        words=open("scrabble5.txt")
        # using for loop and strip to make a dictionary 
        for line in words:
            line = line.rstrip("\n")
            if len(line)==5:              
                key=line
                Value=line
                self.dict[key]=Value
        
    def check(self,word):
        # checking if the word is in the dict or not 
        if word in self.dict:
            return True
        else:
            return False 

    def getSize(self):
        # taking out the len of the dict 
        return len(self.dict)

    def getWords(self,letter):
        # making a sorted list of keys 
        dictionary=self.dict.keys()
        sorted_list=sorted(dictionary)
        # print(sorted_list)
        res = [index for index in sorted_list if index[0].lower() == letter.lower()]
        return res
    
    def getWordSize(self):
        return self.size

    def getMaskedWords(self, template):
        # making a list of the template with lower case 
        list_template=list(template.lower())
        # taking out the position of the hashes 
        position_index=[]
        for i in range(len(list_template)):
            if list_template[i]=='*':
                position_index.append(i)
        # making the list of the values in dict 
        new_list = list(self.dict.values())
        # changing the hashes on the position in the keys 
        words_hash=[]
        for i in range(len(new_list)):
            word=new_list[i]
            word_list=list(word)
            for j in position_index:
                word_list[j]="*"
            word_again="".join(word_list)
            words_hash.append(word_again)
        # making a new lists of hint and returning it
        hints=[]
        for i in range(len(words_hash)):
            if template.lower()==words_hash[i]:
                hints.append(new_list[i])

        return hints

    def getConstrainedWords(self, template,letters): 
        # making a list of the template 
        sanket=ScrablleDict(5,"scrabble5.txt")
        list_template=list(template.lower())
        # taking out the position of the hashes 
        position_index=[]
        for i in range(len(list_template)):
            if list_template[i]=='*':
                position_index.append(i)

        # making a list with all the hints 
        letter_hints=[]
        for letter in letters:
            for i in position_index:
                list_template=list(template.lower())
                list_template[i]=letter
                joined_word="".join(list_template)
                letter_hints.append(joined_word)
        # creating a list of the hints and returning it 
        hints_second=[]
        for j in letter_hints:
            hints_second.append(sanket.getMaskedWords(j))
        hints_second=list(set(flat_list(hints_second)))

        return hints_second

def random_word():
    # taking out a random word form the list of keys 
    words=ScrablleDict(5,"scrabble5.txt")
    keys=list(words.dict.keys())
    word=random.choice(keys)
    return word

def intersections(list_1,list_2):
    # taking out the intersection between two lists 
    lst3 = [value for value in list_1 if value in list_2]
    return lst3

def flat_list(name):
    # making a nested list into the 2 dimensional list 
    flatlist= [ item for element in name for item in element]
    return flatlist

